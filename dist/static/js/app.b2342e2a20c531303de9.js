webpackJsonp([1],{17:function(t,e,n){"use strict";var s={202:"用户名已存在",210:"用户名或密码错误",211:"该用户名不存在",217:"无效的用户名",unkown:"未知错误，稍后重试"};e.a=function(t){var e=t.code;return s[e]?s[e]:s.unknown}},26:function(t,e,n){"use strict";var s=n(2),o=n(95),a=n(88),r=n.n(a);s.default.use(o.a),e.a=new o.a({routes:[{path:"/",name:"Hello",component:r.a}]})},28:function(t,e){},29:function(t,e,n){n(82);var s=n(7)(n(52),n(93),null,null);t.exports=s.exports},4:function(t,e,n){"use strict";var s=n(86),o=n.n(s);o.a.init({appId:"be0B7Hrmn2ek9qx7d8yFK5eP-gzGzoHsz",appKey:"m4dplgRGaxNu2khXIWPA6ewS"}),e.a=o.a},52:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(4),o=n(89),a=n.n(o),r=n(90),i=n.n(r),l=n(56),c=n(58),u=n(57);e.default={name:"app",data:function(){return{newTodo:"",todoList:[],showSignIn:!1,showSignUp:!1,isSignIn:!1,user:{}}},components:{SignInForm:a.a,SignUpForm:i.a},created:function(){s.a.User.current()&&(this.initUser(),this.readTodos())},methods:{readTodos:function(){var t=this;n.i(u.a)().then(function(e){e?(t.todoList=e.content,t.user.objId=e.objId,console.log("User id:",t.user.id),console.log("Obj id:",t.user.objId)):console.log("未读取到信息")},function(t){console.error("something wrong",t)})},handleTodos:function(){var t=this;n.i(c.a)(this.todoList,this.user.objId).then(function(e){t.user.objId=e.id,console.log("success,obj-id:",t.user.objId)},function(t){console.error("fail")})},addTodo:function(t){var e=new Date,n={title:this.newTodo,createTime:{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes()+1},done:!1};this.todoList.push(n),this.newTodo="",this.handleTodos()},delTodo:function(t){var e=this.todoList.indexOf(t);this.todoList.splice(e,1),this.handleTodos()},initUser:function(){this.user=n.i(l.a)(),this.showSignIn=!1,this.showSignUp=!1,this.isSignIn=!0,this.readTodos()},logOut:function(){s.a.User.logOut(),this.user={},window.location.reload()}}}},53:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"hello",data:function(){return{msg:"Welcome to Your Vue.js App"}}}},54:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(4),o=n(17);e.default={name:"SignInForm",data:function(){return{formData:{username:"",password:""},errorMessage:""}},methods:{signIn:function(){var t=this,e=this.formData,a=e.username,r=e.password;s.a.User.logIn(a,r).then(function(){t.$emit("success")},function(e){t.errorMessage=n.i(o.a)(e)})},close:function(){this.$emit("close"),this.formData.username="",this.formData.password=""}}}},55:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(4),o=n(17);e.default={name:"SignUpForm",data:function(){return{formData:{username:"",password:""},errorMessage:""}},created:function(){},methods:{signUp:function(){var t=this,e=this.formData,a=e.username,r=e.password,i=new s.a.User;i.setUsername(a),i.setPassword(r),i.signUp().then(function(){s.a.User.logIn(a,r)},function(e){t.errorMessage=n.i(o.a)(e)}).then(function(){t.$emit("success")},function(e){t.errorMessage=n.i(o.a)(e)})},close:function(){this.$emit("close"),this.formData.username="",this.formData.password=""}}}},56:function(t,e,n){"use strict";var s=n(4);e.a=function(t){var e=s.a.User.current();if(e){return{id:e.id,username:e.attributes.username}}return!1}},57:function(t,e,n){"use strict";var s=n(4);e.a=function(){return new s.a.Query("MyTodos").find().then(function(t){return!!(t=t[0])&&{content:JSON.parse(t.attributes.content),objId:t.id}},function(t){console.log("something wrong in reading:",t)})}},58:function(t,e,n){"use strict";var s=n(60),o=n.n(s),a=n(4);e.a=function(t,e){var n=o()(t),s=void 0;if(e)s=a.a.Object.createWithoutData("MyTodos",e),console.log("Updating");else{var r=new a.a.ACL;r.setReadAccess(a.a.User.current(),!0),r.setWriteAccess(a.a.User.current(),!0);s=new(a.a.Object.extend("MyTodos")),s.setACL(r),console.log("Saving")}return s.set("content",n),s.save()}},59:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),o=n(27),a=n.n(o),r=n(28),i=(n.n(r),n(29)),l=n.n(i),c=n(26);s.default.use(a.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:c.a,template:"<App/>",components:{App:l.a}})},82:function(t,e){},83:function(t,e){},88:function(t,e,n){n(83);var s=n(7)(n(53),n(94),"data-v-f3f07b5e",null);t.exports=s.exports},89:function(t,e,n){var s=n(7)(n(54),n(92),null,null);t.exports=s.exports},90:function(t,e,n){var s=n(7)(n(55),n(91),null,null);t.exports=s.exports},91:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{on:{submit:function(e){e.preventDefault(),t.signIn(e)}}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:t.formData.username,callback:function(e){t.formData.username=e},expression:"formData.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.formData.password,callback:function(e){t.formData.password=e},expression:"formData.password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.signUp}},[t._v("注册")]),t._v(" "),n("el-button",{on:{click:t.close}},[t._v("取消")])],1),t._v(" "),n("span",{staticClass:"errorMessage"},[t._v(t._s(t.errorMessage))])],1)},staticRenderFns:[]}},92:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{on:{submit:function(e){e.preventDefault(),t.signIn(e)}}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:t.formData.username,callback:function(e){t.formData.username=e},expression:"formData.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.formData.password,callback:function(e){t.formData.password=e},expression:"formData.password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.signIn}},[t._v("登录")]),t._v(" "),n("el-button",{on:{click:t.close}},[t._v("取消")])],1),t._v(" "),n("span",{staticClass:"errorMessage"},[t._v(t._s(t.errorMessage))])],1)},staticRenderFns:[]}},93:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[t.isSignIn?n("div",{staticClass:"layout"},[n("span",{staticClass:"btn",on:{click:t.logOut}},[t._v("登出")])]):n("div",{staticClass:"layout"},[n("span",{staticClass:"btn",on:{click:function(e){t.showSignUp=!0}}},[t._v("注册")]),t._v(" "),n("span",{staticClass:"btn",on:{click:function(e){t.showSignIn=!0}}},[t._v("登录")])])]),t._v(" "),n("div",{staticClass:"layout"},[n("el-dialog",{attrs:{title:"注册",size:"tiny"},model:{value:t.showSignUp,callback:function(e){t.showSignUp=e},expression:"showSignUp"}},[n("SignUpForm",{on:{success:t.initUser,close:function(e){t.showSignUp=!1}}})],1),t._v(" "),n("el-dialog",{attrs:{title:"登录",size:"tiny"},model:{value:t.showSignIn,callback:function(e){t.showSignIn=e},expression:"showSignIn"}},[n("SignInForm",{on:{success:t.initUser,close:function(e){t.showSignIn=!1}}})],1),t._v(" "),n("section",{attrs:{id:"todo"}},[n("header",[n("h1",{attrs:{id:"header"}},[t._v("Hello "+t._s(t.user.username))]),t._v(" "),n("el-form",{attrs:{inline:!0}},[n("el-form-item",[n("el-input",{attrs:{type:"text",placeholder:"输入待办事项"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.addTodo(e)}},model:{value:t.newTodo,callback:function(e){t.newTodo=e},expression:"newTodo"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.addTodo}},[t._v("添加")])],1)],1)],1),t._v(" "),n("div",{attrs:{id:"todos"}},t._l(t.todoList,function(e){return n("el-row",{staticClass:"grid",attrs:{gutter:10}},[n("el-col",{attrs:{xs:2,sm:2,md:2,lg:2}},[n("div",{staticClass:"grid-content"},[n("el-checkbox",{on:{change:t.handleTodos},model:{value:e.done,callback:function(t){e.done=t},expression:"todo.done"}})],1)]),t._v(" "),n("el-col",{attrs:{xs:6,sm:6,md:6,lg:6}},[n("div",{staticClass:"grid-content"},[n("span",{staticClass:"todo-title"},[t._v(t._s(e.title))])])]),t._v(" "),n("el-col",{attrs:{xs:4,sm:4,md:4,lg:4}},[n("div",{staticClass:"grid-content"},[e.done?n("span",{staticClass:"done-or-not"},[t._v("（已完成）")]):n("span",{staticClass:"done-or-not"})])]),t._v(" "),n("el-col",{attrs:{xs:8,sm:8,md:8,lg:8}},[n("div",{staticClass:"grid-content"},[n("span",{staticClass:"created-time"},[t._v("创建于"+t._s(e.createTime.month)+"月"+t._s(e.createTime.day)+"日"+t._s(e.createTime.hour)+"时"+t._s(e.createTime.minute)+"分")])])]),t._v(" "),n("el-col",{attrs:{xs:4,sm:4,md:4,lg:4}},[n("div",{staticClass:"grid-content"},[n("el-button",{on:{click:function(n){t.delTodo(e)}}},[t._v("移除")])],1)])],1)}))])],1)])},staticRenderFns:[]}},94:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))]),t._v(" "),n("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),n("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("Core Docs")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("Forum")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://gitter.im/vuejs/vue",target:"_blank"}},[t._v("Gitter Chat")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("Twitter")])]),t._v(" "),n("br"),t._v(" "),n("li",[n("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("Docs for This Template")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[t._v("vue-router")])]),t._v(" "),n("li",[n("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[t._v("vuex")])]),t._v(" "),n("li",[n("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[t._v("vue-loader")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[t._v("awesome-vue")])])])}]}}},[59]);
//# sourceMappingURL=app.b2342e2a20c531303de9.js.map